# Cyberimmune web-project
  ### Состав команды:
- Елехин Александр - 3 курс ИВТ-22-22
- Георгиев Семен - 3 курс ИВТ-22-22
 - Антонов Вадим - 3 курс ИВТ-22-22

## Приложение "SecureVault"

Это веб-приложение, предназначенное для безопасного хранения и управления личными данными пользователей, такими как пароли, номера кредитных карт и личные заметки. Пользователи могут создавать учетные записи, добавлять свои данные в защищенные хранилища и получать к ним доступ с любого устройства.

## Архитектура:

![1](https://github.com/user-attachments/assets/ed9b8ea7-5906-4dca-b985-7d7dd1f509df)

## Модель нарушителя:
![2](https://github.com/user-attachments/assets/02002233-850f-4143-a641-ebd5129aa85c)


## Компоненты:
* Клиент: Веб-интерфейс, написанный на HTML, CSS и JavaScript. Использует REST API для взаимодействия с сервером.
* Сервер: 
    * Приложение:  Backend написан на Node.js с использованием фреймворка Express.js. Обрабатывает запросы от клиента, взаимодействует с базой данных и выполняет бизнес-логику.
    * База данных: Хранит данные пользователей, включая учетные записи, данные хранилищ и сессии. Используется MongoDB.
* Балансировщик нагрузки: Распределяет трафик между несколькими экземплярами сервера для обеспечения масштабируемости.
* CDN: Кэширует статические ресурсы (HTML, CSS, JS) для улучшения производительности.

## Уязвимости:
1. SQL-инъекция в запросах к базе данных: 
    * Описание: Приложение использует небезопасные методы формирования SQL-запросов, что позволяет злоумышленнику внедрить вредоносный код в запрос.
    * Влияние: Злоумышленник может получить доступ к конфиденциальным данным пользователей, таким как пароли и номера кредитных карт.
2. Межсайтовый скриптинг (XSS) в веб-интерфейсе:
    * Описание: Приложение не экранирует пользовательский ввод, что позволяет злоумышленнику внедрить вредоносный JavaScript-код на страницы сайта.
    * Влияние: Злоумышленник может украсть сессионные куки пользователей, получить доступ к их учетным записям и выполнить действия от их имени.
3. Отсутствие шифрования данных при хранении:
    * Описание: Данные пользователей хранятся в базе данных в незашифрованном виде.
    * Влияние: В случае компрометации базы данных злоумышленник получит неограниченный доступ к конфиденциальным данным всех пользователей.
  
### Положительный (успех защиты) сценарий атаки для уязвимости 1:

Описание:

Злоумышленник пытается взломать приложение "SecureVault" с помощью SQL-инъекции, чтобы получить доступ к конфиденциальным данным пользователей. Однако, благодаря комплексному подходу к безопасности, включающему использование параметризованных запросов, ORM, валидации и экранирования пользовательского ввода, а также модулей защиты Key Management Service (KMS) и Web Application Firewall (WAF), атака блокируется, и база данных остается в безопасности.

Последовательность событий:

1. Клиент: Злоумышленник открывает веб-интерфейс "SecureVault" и вводит свои учетные данные в форму входа. Однако, вместо корректного логина и пароля, он вставляет вредоносный код, предназначенный для внедрения в SQL-запрос. Например, он может использовать следующий запрос:
    логин: ' OR '1'='1
    пароль: ' OR '1'='1
    Этот запрос должен вернуть все записи из базы данных, так как условие '1'='1' всегда истинно.

2. WAF (Web Application Firewall):
     Фильтрация запросов: WAF анализирует входящие запросы на наличие известных уязвимостей, включая SQL-инъекции. В данном случае, WAF обнаруживает подозрительный запрос и блокирует его, не допуская дальнейшей обработки на сервере.
     Реакция: WAF генерирует запись о попытке атаки и отправляет уведомление администраторам системы.

3. KMS (Key Management Service):
     Шифрование данных: KMS обеспечивает безопасное хранение и управление ключами шифрования, используемыми для защиты конфиденциальных данных пользователей. Даже если бы атака прошла, данные были бы зашифрованы и недоступны злоумышленнику.
     Аудит и мониторинг: KMS ведет журналы всех операций с ключами, что позволяет отслеживать и анализировать любые подозрительные действия.

Результат:

 Блокировка атаки: WAF успешно блокирует вредоносный запрос, предотвращая его дальнейшую обработку на сервере.
 Защита данных: Использование параметризованных запросов и ORM обеспечивает безопасность формирования SQL-запросов, предотвращая внедрение вредоносного кода.
 Шифрование данных: KMS обеспечивает безопасное хранение и управление ключами шифрования, защищая конфиденциальные данные пользователей даже в случае успешной атаки.
 Аудит и мониторинг: WAF и KMS ведут журналы всех подозрительных действий, что позволяет администраторам системы оперативно реагировать на угрозы.

### Негативный (провал защиты) сценарий атаки для уязвимости 1:

Описание:

Веб-приложение "SecureVault" использует небезопасные методы формирования SQL-запросов, что позволяет злоумышленнику успешно внедрить вредоносный код и получить доступ к конфиденциальным данным пользователей. Отсутствие модулей защиты Key Management Service (KMS) и Web Application Firewall (WAF) усугубляет ситуацию, что приводит к успешной утечке данных.

Действие злоумышленика:
Злоумышленник открывает веб-интерфейс "SecureVault" и вводит свои учетные данные в форму входа. Он использует вредоносный код, предназначенный для внедрения в SQL-запрос. Например, он может использовать следующий запрос:
    логин: ' OR '1'='1
    пароль: ' OR '1'='1

Результат:

 Успешная инъекция: Вредоносный запрос успешно выполняется, так как приложение использует небезопасные методы формирования SQL-запросов.
 Получение доступа: Злоумышленник получает доступ к конфиденциальным данным пользователей, таким как пароли, номера кредитных карт и личные заметки.
 Утечка данных: Происходит утечка данных, что может привести к серьезным последствиям для пользователей и компании.

### Положительный (успех защиты) сценарий атаки для уязвимости 2:

Описание:

Веб-приложение "SecureVault" исправляет уязвимости XSS, экранируя пользовательский ввод на стороне сервера перед его отображением в веб-интерфейсе. Также используется Content Security Policy (CSP) для ограничения выполнения JavaScript-кода.

Последовательность событий:

1. Клиент: Злоумышленник открывает веб-интерфейс "SecureVault" и находит форму, где пользователи могут оставлять комментарии или вводить данные. Он вставляет вредоносный JavaScript-код в поле ввода, например:
    <script>alert('XSS');</script>

2. Клиент (другой пользователь): Другой пользователь открывает страницу, где отображается введенный злоумышленником комментарий. Вредоносный JavaScript-код не выполняется, так как он был экранирован на стороне сервера.

Результат:

 Предотвращение выполнения вредоносного кода: Экранирование пользовательского ввода на стороне сервера предотвращает выполнение вредоносного JavaScript-кода в браузере других пользователей.
 Защита от XSS: Использование CSP дополнительно защищает от XSS-атак, ограничивая выполнение JavaScript-кода только из доверенных источников.
 Безопасность данных: Конфиденциальные данные пользователей остаются в безопасности, так как вредоносный код не может быть выполнен.

### Негативный (провал защиты) сценарий атаки для уязвимости 2:

Описание:

Приложение "SecureVault" не экранирует пользовательский ввод, что позволяет злоумышленнику внедрить вредоносный JavaScript-код на страницы сайта. Это приводит к уязвимости XSS, которая может быть использована для кражи сессионных кук пользователей, получения доступа к их учетным записям и выполнения действий от их имени.

Последовательность событий:

1. Клиент: Злоумышленник открывает веб-интерфейс "SecureVault" и находит форму, где пользователи могут оставлять комментарии или вводить данные. Он вставляет вредоносный JavaScript-код в поле ввода, например:
    <script>alert('XSS');</script>

2. Клиент (другой пользователь): Другой пользователь открывает страницу, где отображается введенный злоумышленником комментарий. Вредоносный JavaScript-код выполняется в браузере пользователя, что может привести к краже сессионных кук и другим вредоносным действиям.

Результат:

 Выполнение вредоносного кода: Вредоносный JavaScript-код выполняется в браузере других пользователей, что может привести к краже сессионных кук и получению несанкционированного доступа к их учетным записям.
 Утечка данных: Злоумышленник может получить доступ к конфиденциальным данным пользователей, таким как пароли, номера кредитных карт и личные заметки.


 
## Сценарий атаки:
1. Злоумышленник обнаруживает уязвимость XSS на странице входа в приложение.
2. Он внедряет вредоносный JavaScript-код в поле ввода имени пользователя.
3. Пользователь, просматривая страницу входа, активирует вредоносный код.
4. Вредоносный код крадет сессионные куки пользователя и отправляет их злоумышленнику.
5. Злоумышленник использует украденные куки для доступа к учетной записи пользователя.
6. Злоумышленник получает доступ к данным хранилища пользователя, включая пароли и номера кредитных карт.

Исправление уязвимостей:
1. SQL-инъекция:
    * Использовать параметризованные запросы или ORM для формирования SQL-запросов.
    * Валидировать и экранировать пользовательский ввод на стороне сервера.
2. XSS:
    * Экранировать пользовательский ввод на стороне сервера перед его отображением в веб-интерфейсе.
    * Использовать Content Security Policy (CSP) для ограничения выполнения JavaScript-кода.
3. Отсутствие шифрования данных:
    * Шифровать конфиденциальные данные пользователей перед их сохранением в базе данных.
    * Использовать надежные алгоритмы шифрования и безопасные методы управления ключами.

Новая архитектура:

[SecureVault Architecture]

Изменения:

* Добавлен модуль шифрования данных: Шифрует конфиденциальные данные пользователей перед их сохранением в базе данных и расшифровывает их при запросе.
* Добавлен модуль валидации и экранирования ввода: Валидирует и экранирует пользовательский ввод на стороне сервера для предотвращения SQL-инъекций и XSS-атак.
* Добавлен Content Security Policy (CSP): Ограничивает выполнение JavaScript-кода в веб-интерфейсе.
